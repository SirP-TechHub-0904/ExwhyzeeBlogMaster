@using Microsoft.AspNetCore.Hosting
@using Microsoft.AspNetCore.Mvc.ViewEngines
@inject IWebHostEnvironment Environment
@inject ICompositeViewEngine Engine
@using Microsoft.AspNetCore.Authorization
@inject IAuthorizationService AuthorizationService
@using ModelData.Services;
@inject ISettingsService SettingsService
@inject ICategoryServices CategoryServices
@inject IWebPageService WebPageService
@inject IPostServices PostServices
@inject IAdvertService AdvertServices

@using Microsoft.AspNetCore.Identity
@using ModelData.Models  <!-- Replace with actual namespace -->
@inject UserManager<ApplicationUser> UserManager
@inject SignInManager<ApplicationUser> SignInManager

@{
    ModelData.Models.Setting siteSettings = await SettingsService.GetSettingsAsync();
    List<ModelData.Models.Category> itemCategories = await CategoryServices.GetCategoriesAsync();
    List<ModelData.Models.WebPage> itemWebPages = await WebPageService.GetPublishedPages();
    List<ModelData.Models.Post> itemPost = await PostServices.GetPublishedPosts();
    List<ModelData.Models.Post> mostViewdPosts = await PostServices.GetTopViewedPostsAsync(count: 3);
    List<ModelData.Models.Post> breakingNew = await PostServices.GetBrakingNews(count: 10);
    List<ModelData.Models.PostImage> galleryasync = await PostServices.GetGalleryAsync(10);
    List<ModelData.Models.Advert> itemAdert = await AdvertServices.GetAdvertsAsync();

    var plainDescription = System.Text.RegularExpressions.Regex.Replace(siteSettings.SiteDescription ?? "", "<.*?>", "");
}



<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>
        @($"{ViewBag.Title} | {siteSettings.SiteTitle} | {plainDescription}")
    </title>


    <link rel="icon" href="@siteSettings.FaviconUrl" type="image/png">
    <partial name="_MetaTags" />

    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.2">

    <!--style-->
    <link href="~/assets/css" rel="stylesheet" type="text/css">
    <link href="~/assets/css(1)" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="~/assets/reset.css">
    <link rel="stylesheet" type="text/css" href="~/assets/superfish.css">
    <link rel="stylesheet" type="text/css" href="~/assets/prettyPhoto.css">
    <link rel="stylesheet" type="text/css" href="~/assets/jquery.qtip.css">
    <link rel="stylesheet" type="text/css" href="~/assets/style.css">
    <link rel="stylesheet" type="text/css" href="~/assets/menu_styles.css">
    <link rel="stylesheet" type="text/css" href="~/assets/animations.css">
    <link rel="stylesheet" type="text/css" href="~/assets/responsive.css">
    <link rel="stylesheet" type="text/css" href="~/assets/odometer-theme-default.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <!-- Font Awesome 4.7.0 CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="~/css/site.css" rel="stylesheet" />

    <style>
  @Html.Raw(siteSettings.CustomCSS)
    </style>
    @Html.Raw(siteSettings.CustomHeadScript)
    @Html.Raw(siteSettings.GoogleAnalyticsId)
    @Html.Raw(siteSettings.GoogleTagManagerId)
    @Html.Raw(siteSettings.FacebookPixelId)

</head>

<body class="">
    @Html.Raw(siteSettings.CustomJS)
    @if (siteSettings.EnableLiveChat)
    {
        @siteSettings.LiveChatScript
    }
    <div class="site_container">

        <div class="header_top_bar_container clearfix">
            <div class="header_top_bar">
                <form method="get" asp-page="/Search" class="search">
                    <input type="text" name="query" placeholder="Search..." value="Search..." class="search_input hint">
                    <input type="submit" class="search_submit" value="">
                </form>

                <ul class="social_icons clearfix dark">
                    @* Facebook *@
                    @if (!string.IsNullOrWhiteSpace(siteSettings.FacebookUrl))
                    {
                        <li>
                            <a target="_blank" href="@siteSettings.FacebookUrl" class="social_icon facebook" title="Facebook">
                                &nbsp;
                            </a>
                        </li>
                    }

                    @* Twitter (X) *@
                    @if (!string.IsNullOrWhiteSpace(siteSettings.TwitterUrl))
                    {
                        <li>
                            <a target="_blank" href="@siteSettings.TwitterUrl" class="social_icon twitter" title="Twitter">
                                &nbsp;
                            </a>
                        </li>
                    }

                    @* LinkedIn *@
                    @if (!string.IsNullOrWhiteSpace(siteSettings.LinkedInUrl))
                    {
                        <li>
                            <a target="_blank" href="@siteSettings.LinkedInUrl" class="social_icon linkedin" title="LinkedIn">
                                &nbsp;
                            </a>
                        </li>
                    }

                    @* Instagram *@
                    @if (!string.IsNullOrWhiteSpace(siteSettings.InstagramUrl))
                    {
                        <li>
                            <a target="_blank" href="@siteSettings.InstagramUrl" class="social_icon instagram" title="Instagram">
                                &nbsp;
                            </a>
                        </li>
                    }

                    @* YouTube *@
                    @if (!string.IsNullOrWhiteSpace(siteSettings.YouTubeUrl))
                    {
                        <li>
                            <a target="_blank" href="@siteSettings.YouTubeUrl" class="social_icon youtube" title="YouTube">
                                &nbsp;
                            </a>
                        </li>
                    }

                    @* TikTok (ensure you have a .social_icon.tiktok style/icon in your CSS) *@
                    @if (!string.IsNullOrWhiteSpace(siteSettings.TikTokUrl))
                    {
                        <li>
                            <a target="_blank" href="@siteSettings.TikTokUrl" class="social_icon tiktok" title="TikTok">
                                &nbsp;
                            </a>
                        </li>
                    }
                </ul>


                <div class="latest_news_scrolling_list_container">
                    <ul>
                        <li class="category">LATEST</li>

                        <li class="left"><a href="#" id="latest-prev"></a></li>
                        <li class="right"><a href="#" id="latest-next"></a></li>

                        <li class="posts">
                            <div class="caroufredsel_wrapper_vertical_carousel">
                                <ul class="latest_news_scrolling_list" id="latest-news">
                                    @foreach (var item in breakingNew)
                                    {
                                        <li>
                                            <a asp-page="/PostPage" asp-route-slug="@item.Slug" title="@item.Title">
                                                @item.Title
                                            </a>
                                        </li>
                                    }
                                </ul>
                            </div>
                        </li>

                        <li class="date">
                            @{
                                // Show date for the first (current) item if available
                                var first = breakingNew?.FirstOrDefault();
                                var published = first?.PublishedAt; // adjust if your field is different (e.g., CreatedAt)
                                if (published.HasValue)
                                {
                                    // timeago-friendly ISO string in title; visible fallback text
                                    <abbr class="timeago current" title="@published.Value.ToUniversalTime().ToString("yyyy-MM-ddTHH:mm:ssZ")">
                                        @published.Value.ToString("\"hh:mm tt, MMM dd\"")
                                    </abbr>
                                }
                            }
                        </li>
                    </ul>
                </div>


            </div>
        </div>

        <div class="header_container">
            <div class="header clearfix">
                <div class="logo">
                    <a href="/" class="btn-link">
                        <img src="@siteSettings.SiteLogoUrl" alt="@siteSettings.SiteTitle" />

                    </a>
                </div>
            </div>
        </div>

        @{
            ModelData.Models.Advert sideadvert = itemAdert.FirstOrDefault(x => x.Position == ModelData.Models.AdvertPosition.MainTop);
        }
        @if (sideadvert != null)
        {
            <div class="main-top-advert">
                <a href="@sideadvert.Link" target="_blank">
                    <img src="@sideadvert.ImageUrl" alt="@sideadvert.Title" class="img-fluid">
                </a>
            </div>
        }


        <div class="menu_container clearfix">
            @{
                var currentPath = Context.Request.Path.Value?.ToLower();
            }

            <nav>

                <ul class="sf-menu">

                    <li class="@(currentPath == "/" ? "selected" : "")">
                        <a href="/" title="Home">Home</a>
                    </li>
                    @foreach (var sitepage in itemWebPages.Where(x => x.ShowInMenu == true).Where(x => x.MenuSortOrder > 0))
                    {
                        var pageUrl = sitepage.EnableDirectLink
                ? sitepage.DirectLinkUrl?.ToLower()
                : Url.Page("/Webpage", new { slug = sitepage.Slug }).ToLower();

                <li class="@(currentPath == pageUrl ? "selected" : "")">
                    @if (sitepage.EnableDirectLink)
                    {
                        <a href="@sitepage.DirectLinkUrl" target="@(sitepage.DirectLinkOpenInNewTab ? "_blank" : "_self")" title="@sitepage.Title">@sitepage.Title</a>

                    }
                    else
                    {
                        <a asp-page="/Webpage" asp-route-slug="@sitepage.Slug" title="@sitepage.Title">@sitepage.Title</a>
                    }
                </li>
            }


                    @foreach (var sitecategory in itemCategories.Where(x => x.ShowInMenu == true))
                    {
                        var catUrl = Url.Page("/CategoryPage", new { slug = sitecategory.Slug }).ToLower();
                        var isCatActive = currentPath == catUrl ||
                                          sitecategory.Children.Any(c => currentPath == Url.Page("/CategoryPage", new { slug = c.Slug }).ToLower());


                        @if (sitecategory.Children.Count() > 0)
                        {
                            <li class="submenu @(isCatActive ? "selected" : "")">
                                <a asp-page="/CategoryPage" asp-route-slug="@sitecategory.Slug" title="@sitecategory.Title">
                                    @sitecategory.Title

                                </a>

                                <!-- Submenu Start -->
                                <ul class="dropdown-menu">
                                    @foreach (var list in sitecategory.Children.Where(x => x.IsPublished == true))
                                    {
                                        <li>
                                            <a asp-page="/CategoryPage" asp-route-slug="@list.Slug" title="@list.Title">@list.Title</a>
                                        </li>
                                    }
                                </ul><!-- Submenu End -->

                            </li>

                        }
                        else
                        {
                            <li class="@(isCatActive ? "selected" : "")"> <a asp-page="/CategoryPage" asp-route-slug="@sitecategory.Slug" title="@sitecategory.Title">@sitecategory.Title</a></li>
                        }

                    }

                    @foreach (var sitepage in itemWebPages.Where(x => x.ShowInMenu == true).Where(x => x.MenuSortOrder < 0))
                    {
                        var pageUrl = sitepage.EnableDirectLink
? sitepage.DirectLinkUrl?.ToLower()
: Url.Page("/Webpage", new { slug = sitepage.Slug }).ToLower();

        <li class="@(currentPath == pageUrl ? "selected" : "")">
            @if (sitepage.EnableDirectLink)
            {
                <a href="@sitepage.DirectLinkUrl" target="@(sitepage.DirectLinkOpenInNewTab ? "_blank" : "_self")" title="@sitepage.Title">@sitepage.Title</a>

            }
            else
            {
                <a asp-page="/Webpage" asp-route-slug="@sitepage.Slug" title="@sitepage.Title">@sitepage.Title</a>
            }
        </li>



    }
                    <partial name="_LoginPartial" />
                </ul>
            </nav>
            <div class="mobile_menu_container">
                <a href="#" class="mobile-menu-switch">
                    <span class="line"></span>
                    <span class="line"></span>
                    <span class="line"></span>
                </a>
                <div class="mobile-menu-divider"></div>
                <nav>
                    <ul class="mobile-menu">
                        <li class="">
                            <a href="/" title="Home">Home</a>
                        </li>
                        @foreach (var sitepage in itemWebPages.Where(x => x.ShowInMenu == true).Where(x => x.MenuSortOrder > 0))
                        {
                            var pageUrl = sitepage.EnableDirectLink
? sitepage.DirectLinkUrl?.ToLower()
: Url.Page("/Webpage", new { slug = sitepage.Slug }).ToLower();

            <li class="@(currentPath == pageUrl ? "selected" : "")">
                @if (sitepage.EnableDirectLink)
                {
                    <a href="@sitepage.DirectLinkUrl" target="@(sitepage.DirectLinkOpenInNewTab ? "_blank" : "_self")" title="@sitepage.Title">@sitepage.Title</a>

                }
                else
                {
                    <a asp-page="/Webpage" asp-route-slug="@sitepage.Slug" title="@sitepage.Title">@sitepage.Title</a>
                }
            </li>
        }


                        @foreach (var sitecategory in itemCategories.Where(x => x.ShowInMenu == true))
                        {
                            var catUrl = Url.Page("/CategoryPage", new { slug = sitecategory.Slug }).ToLower();
                            var isCatActive = currentPath == catUrl ||
                                              sitecategory.Children.Any(c => currentPath == Url.Page("/CategoryPage", new { slug = c.Slug }).ToLower());

                            @if (sitecategory.Children.Count() > 0)
                            {
                                <li class="submenu @(isCatActive ? "selected" : "")">
                                    <a asp-page="/CategoryPage" asp-route-slug="@sitecategory.Slug" title="@sitecategory.Title">
                                        @sitecategory.Title

                                    </a>

                                    <!-- Submenu Start -->
                                    <ul class="dropdown-menu">
                                        @foreach (var list in sitecategory.Children.Where(x => x.IsPublished == true))
                                        {
                                            <li>
                                                <a asp-page="/CategoryPage" asp-route-slug="@list.Slug" title="@list.Title">@list.Title</a>
                                            </li>
                                        }
                                    </ul><!-- Submenu End -->

                                </li>

                            }
                            else
                            {
                                <li class="@(isCatActive ? "selected" : "")"> <a asp-page="/CategoryPage" asp-route-slug="@sitecategory.Slug" title="@sitecategory.Title">@sitecategory.Title</a></li>
                            }

                        }

                        @foreach (var sitepage in itemWebPages.Where(x => x.ShowInMenu == true).Where(x => x.MenuSortOrder < 0))
                        {
                            var pageUrl = sitepage.EnableDirectLink
? sitepage.DirectLinkUrl?.ToLower()
: Url.Page("/Webpage", new { slug = sitepage.Slug }).ToLower();

            <li class="@(currentPath == pageUrl ? "selected" : "")">
                @if (sitepage.EnableDirectLink)
                {
                    <a href="@sitepage.DirectLinkUrl" target="@(sitepage.DirectLinkOpenInNewTab ? "_blank" : "_self")" title="@sitepage.Title">@sitepage.Title</a>

                }
                else
                {
                    <a asp-page="/Webpage" asp-route-slug="@sitepage.Slug" title="@sitepage.Title">@sitepage.Title</a>
                }
            </li>


        }
                        <partial name="_LoginPartial" />
                    </ul>
                </nav>
            </div>
        </div>

        <div class="page">

            <div class="page_layout clearfix">
                @RenderBody()
            </div>

        </div>
        <div class="footer_container">

            <div class="footer clearfix">

                <div class="row">

                    <div class="column column_1_3">

                        <h4 class="box_header">
                            @siteSettings.SiteTitle
                        </h4>

                        <p class="padding_top_bottom_25">
                            @plainDescription
                        </p>

                        <div class="row">
                            @if (!string.IsNullOrWhiteSpace(siteSettings.Address))
                            {
                                <div class="column column_1_2">

                                    <h5>
                                        Address
                                    </h5>

                                    <p>
                                        @Html.Raw(siteSettings.Address)

                                    </p>

                                </div>
                            }

                            @if (!string.IsNullOrWhiteSpace(siteSettings.ContactEmail))
                            {

                                <div class="column column_1_2">

                                    <h5>
                                        Email Address
                                    </h5>

                                    <p>
                                        @Html.Raw(siteSettings.ContactEmail)
                                    </p>

                                </div>
                            }
                            @if (!string.IsNullOrWhiteSpace(siteSettings.ContactPhone))
                            {

                                <div class="column column_1_2">

                                    <h5>
                                        Phone &amp; Fax
                                    </h5>

                                    <p>
                                        @Html.Raw(siteSettings.ContactPhone)
                                    </p>

                                </div>
                            }
                        </div>

                        <h4 class="box_header page_margin_top">
                            Get In Touch With Us
                        </h4>

                        <ul class="social_icons dark page_margin_top clearfix">
                            @* Facebook *@
                            @if (!string.IsNullOrWhiteSpace(siteSettings.FacebookUrl))
                            {
                                <li>
                                    <a target="_blank" href="@siteSettings.FacebookUrl" class="social_icon facebook" title="Facebook">
                                        &nbsp;
                                    </a>
                                </li>
                            }

                            @* Twitter (X) *@
                            @if (!string.IsNullOrWhiteSpace(siteSettings.TwitterUrl))
                            {
                                <li>
                                    <a target="_blank" href="@siteSettings.TwitterUrl" class="social_icon twitter" title="Twitter">
                                        &nbsp;
                                    </a>
                                </li>
                            }

                            @* LinkedIn *@
                            @if (!string.IsNullOrWhiteSpace(siteSettings.LinkedInUrl))
                            {
                                <li>
                                    <a target="_blank" href="@siteSettings.LinkedInUrl" class="social_icon linkedin" title="LinkedIn">
                                        &nbsp;
                                    </a>
                                </li>
                            }

                            @* Instagram *@
                            @if (!string.IsNullOrWhiteSpace(siteSettings.InstagramUrl))
                            {
                                <li>
                                    <a target="_blank" href="@siteSettings.InstagramUrl" class="social_icon instagram" title="Instagram">
                                        &nbsp;
                                    </a>
                                </li>
                            }

                            @* YouTube *@
                            @if (!string.IsNullOrWhiteSpace(siteSettings.YouTubeUrl))
                            {
                                <li>
                                    <a target="_blank" href="@siteSettings.YouTubeUrl" class="social_icon youtube" title="YouTube">
                                        &nbsp;
                                    </a>
                                </li>
                            }

                            @* TikTok (ensure you have a .social_icon.tiktok style/icon in your CSS) *@
                            @if (!string.IsNullOrWhiteSpace(siteSettings.TikTokUrl))
                            {
                                <li>
                                    <a target="_blank" href="@siteSettings.TikTokUrl" class="social_icon tiktok" title="TikTok">
                                        &nbsp;
                                    </a>
                                </li>
                            }


                        </ul>

                    </div>

                    <div class="column column_1_3">

                        <h4 class="box_header">
                            Most Viewed Posts
                        </h4>

                        <div class="vertical_carousel_container clearfix">

                            <a class="slider_control up slider_control_0" href="#" title="prev" style="">
                            </a>
                            <div class="caroufredsel_wrapper caroufredsel_wrapper_vertical_carousel" style="text-align: start; float: none; position: relative; inset: auto; z-index: auto; width: 330px; height: 390px; margin: 0px; overflow: hidden;">

                                <ul class="mx-main-footer blog small vertical_carousel autoplay-1 scroll-1 navigation-1 easing-easeInOutQuint duration-750 pr_preloader_vl_0" style="text-align: left; float: none; position: absolute; inset: 0px auto auto 0px; margin: 0px; height: 1430px; width: 330px; z-index: auto;">



                                    @foreach (var item in mostViewdPosts)
                                    {

                                        <li class="post">

                                            <a asp-page="/PostPage" asp-route-slug="@item.Slug" title="@item.Title">

                                                <img src="@(item?.PostImages?.FirstOrDefault(x => x.IsDefault)?.ImageUrl ?? "")" alt="@item.Title" style="display: block;">

                                            </a>

                                            <div class="post_content">

                                                <h5>

                                                    <a asp-page="/PostPage" asp-route-slug="@item.Slug" title="@item.Title">
                                                        @item.Title
                                                    </a>

                                                </h5>

                                                <ul class="post_details simple">

                                                    <li class="category">
                                                        <a asp-page="/CategoryPage" asp-route-slug="@item.Category?.Slug" title="@item.Category?.Title">
                                                            @item.Category?.Title
                                                        </a>
                                                    </li>

                                                    <li class="date">
                                                        @(item.PublishedAt.HasValue
    ? item.PublishedAt.Value.ToString("hh:mm tt, MMM dd")
    : "")

                                                    </li>

                                                </ul>

                                            </div>

                                        </li>

                                    }
                                </ul>

                            </div>
                            <a class="slider_control down slider_control_0" href="#" title="next" style="">
                            </a>

                        </div>

                    </div>

                    <div class="column column_1_3">

                        <h4 class="box_header">
                            Latest Galleries
                        </h4>

                        <div class="horizontal_carousel_container big page_margin_top">

                            <a class="slider_control left slider_control_1" href="#" title="prev" style="">
                            </a>
                            <div class="caroufredsel_wrapper caroufredsel_wrapper_hortizontal_carousel" style="text-align: start; float: none; position: relative; inset: auto; z-index: auto; width: 360px; height: 328.8px; margin: 0px; overflow: hidden;">

                                <ul class="gallery-mx-01 blog horizontal_carousel visible-1 autoplay-0 scroll-1 navigation-1 easing-easeInOutQuint duration-750 pr_preloader_1" style="display: block; text-align: left; float: none; position: absolute; inset: 0px auto auto 0px; margin: 0px; width: 2520px; height: 328.8px;">
                                    @foreach (var img in galleryasync)
                                    {
                                        <li class="post">

                                            <a asp-page="/PostPage" asp-route-slug="@img.Post?.Slug" title="@img.Post?.Title">

                                                <span class="icon gallery" style="display: block;">
                                                </span>

                                                <img src="@img.ImageUrl" alt="@img.Post?.Title" style="display: block;">

                                            </a>

                                            <h5 class="with_number">

                                                <a asp-page="/PostPage" asp-route-slug="@img.Post?.Slug" title="@img.Post?.Title">
                                                    @img.Post?.Title
                                                </a>

                                                <a class="comments_number" href="/PostPage/@img.Post?.Slug#comments_list" title="@img.Post?.Comments?.Count() comments">
                                                    @img.Post?.Comments?.Count()
                                                    <span class="arrow_comments">
                                                    </span>
                                                </a>

                                            </h5>

                                            <ul class="post_details simple">

                                                <li class="category">
                                                    <a asp-page="/CategoryPage" asp-route-slug="@img.Post.Category?.Slug" title="@img.Post?.Category?.Title">
                                                        @img.Post?.Category.?Title
                                                    </a>
                                                </li>

                                                <li class="date">
                                                    @(img.Post?.PublishedAt?.ToString("hh:mm tt, MMM dd") ?? "")

                                                </li>

                                            </ul>

                                        </li>
                                    }

                                </ul>

                            </div>
                            <a class="slider_control right slider_control_1" href="#" title="next" style="">
                            </a>

                        </div>

                    </div>

                </div>

                <div class="row page_margin_top_section">

                    <div class="column column_3_4">

                        <ul class="footer_menu">
                            @foreach (var cat in itemCategories.Where(x => x.ShowInFooter))
                            {
                                <li>
                                    <a asp-page="/CategoryPage" asp-route-slug="@cat.Slug" title="@cat.Title">
                                        @cat.Title
                                    </a>
                                </li>
                            }


                        </ul>

                    </div>

                    <div class="column column_1_4">

                        <a class="scroll_top" href="#top" title="Scroll to top">
                            Top
                        </a>

                    </div>

                </div>

                <div class="row copyright_row">

                    <div class="column column_2_3">
                        © Copyright
                        <a href="/" title="@siteSettings.SiteTitle">
                            @siteSettings.SiteTitle
                        </a>


                    </div>

                    <div class="column column_1_3">

                        <ul class="footer_menu">
                            @foreach (var xpage in itemWebPages.Where(x => x.ShowInFooter))
                            {
                                <li>
                                    <h6>
                                        @if (xpage.EnableDirectLink)
                                        {
                                            <a href="@xpage.DirectLinkUrl" target="@(xpage.DirectLinkOpenInNewTab ? "_blank" : "_self")" title="@xpage.Title">
                                                @xpage.Title
                                            </a>
                                        }
                                        else
                                        {
                                            <a asp-page="/Webpage" asp-route-slug="@xpage.Slug" title="@xpage.Title">
                                                @xpage.Title
                                            </a>
                                        }
                                    </h6>
                                </li>
                            }

                        </ul>

                    </div>

                </div>

            </div>

        </div>
    </div>
    <div class="background_overlay"></div>
    <!--js-->
    <script type="text/javascript" src="~/assets/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="~/assets/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="~/assets/jquery-ui-1.12.1.custom.min.js"></script>
    <script type="text/javascript" src="~/assets/jquery.easing.1.4.1.min.js"></script>
    <script type="text/javascript" src="~/assets/jquery.carouFredSel-6.2.1-packed.js"></script>
    <script type="text/javascript" src="~/assets/jquery.touchSwipe.min.js"></script>
    <script type="text/javascript" src="~/assets/jquery.transit.min.js"></script>
    <script type="text/javascript" src="~/assets/jquery.sliderControl.js"></script>
    <script type="text/javascript" src="~/assets/jquery.timeago.js"></script>
    <script type="text/javascript" src="~/assets/jquery.hint.js"></script>
    <script type="text/javascript" src="~/assets/jquery.prettyPhoto.js"></script>
    <script type="text/javascript" src="~/assets/jquery.qtip.min.js"></script>
    <script type="text/javascript" src="~/assets/jquery.blockUI.js"></script>
    <script type="text/javascript" src="~/assets/jquery.imagesloaded-packed.js"></script>
    <script type="text/javascript" src="~/assets/main.js"></script>
    <script type="text/javascript" src="~/assets/odometer.min.js"></script>
    <link rel="stylesheet" type="text/css" href="~/assets/style_selector.css">
    <script type="text/javascript" src="~/assets/style_selector.js"></script>
    <script>
        $(document).on("click", "#subscribeBtn", function () {
            var email = $("#newsletterEmail").val();
            var token = $("#__RequestVerificationToken").val();
            var messageEl = $("#subscribeMessage");

            $.ajax({
                type: "POST",
                url: "/Index?handler=Subscribe",
                data: {
                    NewsletterEmail: email,
                    __RequestVerificationToken: token
                },
                success: function (res) {
                    messageEl.text(res.message);
                    messageEl.css("color", res.success ? "green" : "yellow");
                    if (res.success) {
                        $("#newsletterEmail").val("");
                    }
                },
                error: function () {
                    messageEl.text("Something went wrong.").css("color", "red");
                }
            });
        });
    </script>
    @await RenderSectionAsync("Scripts", required: false)
    @Html.Raw(siteSettings.CustomFooterScript)


</body>
</html>

